<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Recommendation System for Books</title>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <!-- jQuery and jQuery UI CSS -->
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
</head>
<style>
    .text-white {
        color: white;
    }
    .ui-autocomplete {
        max-height: 200px;
        overflow-y: auto;
        overflow-x: hidden;
        z-index: 1000;
    }
</style>
<body style="background-color: black">

<nav class="navbar" style="background-color:#1f0ce9">
    <a class="navbar-brand" style="color: white;">My Recommendations for Books</a>
    <ul class="nav navbar-nav">
        <li><a href="/" style="color: white;">Home</a></li>
        <li><a href="/recommend" style="color: white;">Recommend</a></li>
        <li><a href="#" style="color: white;">Contact</a></li>
    </ul>
</nav>

<div class="container">
    <div class="row">
        <div class="col-md-12">
            <h1 class="text-white" style="font-size:50px">Books Recommendations</h1>
            <form action="/recommend_books" method="post">
                <input name="user_input" type="text" class="form-control" id="book-input" placeholder="Enter the Book Name" autocomplete="off"><br>
                <input type="submit" class="btn btn-lg" style="background-color: #1f0ce9; color: white;">
            </form>
        </div>

        {% if error %}
        <div class="col-md-12" style="margin-top:20px">
            <div class="alert alert-danger" role="alert">
                {{ error }}
            </div>
        </div>
        {% endif %}

        {% if data %}
            {% for i in data %}
                <div class="col-md-3" style="margin-top:50px">
                    <div class="card">
                        <div class="card-body">
                            <img class="card-img-top" src="{{ i[0] }}">
                            <p class="text-white">{{ i[1] }}</p>
                            <h4 class="text-white">- By {{ i[2] }}</h4>
                            <h4 class="text-white">Published Year - {{ i[3] }}</h4>
                        </div>
                    </div>
                </div>
            {% endfor %}
        {% endif %}
    </div>
</div>

<script>
    $(document).ready(function() {
        $("#book-input").autocomplete({
            source: function(request, response) {
                $.get("/suggest_books", { query: request.term }, function(data) {
                    response(data);
                });
            },
            minLength: 0
        }).focus(function() {
            // Trigger search when the input gains focus
            $(this).autocomplete("search", "");
        });
    });
</script>

</body>
</html>
